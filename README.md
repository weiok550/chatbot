# chatbot
聊天机器人

## 功能概述
- 前端【实现】
  - 功能页面
    - 登陆页
    - 聊天页
  - 使用框架
    - Vue
    - Bootstrap
- 服务端
  - 功能及服务
    - 聊天【实现】
      - 聊天策略接口
        - 聊天策略服务实现
          - 选择机器人
      - 机器人接口
        - mock机器人服务
        - gpt机器人服务
          - 聊天响应
      - 聊天记录服务接口
        - 聊天记录服务实现
          - 聊天记录异步入库(规划)
          - 聊天记录同步入库
    - 用户【实现】
      - 用户服务接口
        - 登陆检测用户名密码是否正确
        - 根据用户名获取账户信息
        - 检测登录态
        - 记录登陆态及用户信息
      - 用户登陆
    - 活动接口【实现】
      - mock活动
        - 检测活动中是否有需要向用户推送的聊天消息
    - 消息通道【规划】
      - 用户连接服务
        - 获取用户的连接服务器及连接句柄
        - 记录用户的连接服务器及连接句柄 
      - 消息通道-websocket
        - 接受用户消息
        - 给用户主动推送消息
        
  - 使用框架
    - gin
  - 使用库
    - zap
    - lumberjack
    - viper
    - gorm
    - go-redis


## 存储
- mysql 落地聊天记录及用户信息
- 聊天记录可以预见数据量会很大根据用户id取模hash分表,提前评估，单表数据量控制在2000万+定时老数据归档
- 用户登陆态信息redis存储，单机本地可以缓存少量(控制内存消耗),优先从本地缓存校验

## 安全
- 对于用户侧数据持怀疑态度不能直接拿来渲染避免xss攻击，服务端前端均需要根据业务场景进行特殊字符的过滤/拦截/替换
- 密码等敏感数据落地使用密文存储
- 手写sql注意类型校验及绑定避免sql注入
## 部署
- 存储及服务均可分布式部署，可以水平扩展
- 随着业务规模扩大可以针对每个服务单独拆分部署 + rpc调用改造


## 线上体验
- https://chatbot.putianxia.fun
- 用户名:neo1 密码:123456


